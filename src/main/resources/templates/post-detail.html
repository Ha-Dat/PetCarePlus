<!doctype html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chó con của tôi cuối cùng đã học được cách ngồi - PetCare+</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            border: "hsl(214.3 31.8% 91.4%)",
            input: "hsl(214.3 31.8% 91.4%)",
            ring: "hsl(142 49% 58%)",
            background: "hsl(0 0% 100%)",
            foreground: "hsl(222.2 84% 4.9%)",
            primary: {
              DEFAULT: "hsl(142 49% 58%)",
              foreground: "hsl(210 40% 98%)",
            },
            secondary: {
              DEFAULT: "hsl(210 40% 96%)",
              foreground: "hsl(222.2 84% 4.9%)",
            },
            destructive: {
              DEFAULT: "hsl(0 84.2% 60.2%)",
              foreground: "hsl(210 40% 98%)",
            },
            muted: {
              DEFAULT: "hsl(210 40% 96%)",
              foreground: "hsl(215.4 16.3% 46.9%)",
            },
            accent: {
              DEFAULT: "hsl(210 40% 96%)",
              foreground: "hsl(222.2 84% 4.9%)",
            },
            popover: {
              DEFAULT: "hsl(0 0% 100%)",
              foreground: "hsl(222.2 84% 4.9%)",
            },
            card: {
              DEFAULT: "hsl(0 0% 100%)",
              foreground: "hsl(222.2 84% 4.9%)",
            },
          },
          borderRadius: {
            lg: "0.5rem",
            md: "calc(0.5rem - 2px)",
            sm: "calc(0.5rem - 4px)",
          },
        },
      },
    };
  </script>
  <style>
    .logo {
      width: 50px;
    }
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>
<body class="bg-background text-foreground">
<!-- Header -->
<header class="sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="container flex h-14 items-center max-w-7xl mx-auto px-8">
    <!-- Logo -->
    <div class="mr-4 flex">
      <a class="mr-6 flex items-center space-x-2" href="/home">
        <img src="https://webnow.vn/wp-content/uploads/2022/12/929214320db3b555561658be08cc399f.jpg" alt="logo" class="logo"/>
        <span class="hidden font-bold sm:inline-block text-xl">PetCare+</span>
      </a>
    </div>

    <!-- Search Bar -->
    <div class="flex flex-1 items-center space-x-2 max-w-md">
      <div class="relative w-full">
        <svg class="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.3-4.3" />
        </svg>
        <input placeholder="Tìm kiếm cộng đồng và bài viết" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 pl-8 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"/>
      </div>
    </div>

    <!-- Navigation -->
    <div class="flex flex-1 items-center justify-end space-x-2">
      <!-- Nếu đã đăng nhập -->
      <a th:if="${session.loggedInUser != null}"
         href="/create-post"
         class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-3 hidden sm:flex">
        <svg class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14" />
          <path d="M12 5v14" />
        </svg>
        <span>Tạo bài</span>
      </a>

      <!-- Avatar - Nếu đã đăng nhập thì về /profile -->
      <a th:if="${session.loggedInUser != null}"
                         href="/profile"
         class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10">
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
      </a>

      <!-- Avatar - Nếu chưa đăng nhập thì về /login -->
      <a th:if="${session.loggedInUser == null}"
         href="/login"
         class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10">
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
      </a>
    </div>
  </div>
</header>

<div class="container max-w-7xl mx-auto px-4 py-6">
  <div class="flex gap-6">
    <!-- Left Sidebar -->
    <div class="hidden lg:block">
      <div class="w-64 sticky top-20 h-fit">
        <div class="space-y-4">
          <!-- Main Navigation -->
          <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
            <div class="p-3">
              <nav class="space-y-1">
                <a href="/forum" class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground text-accent-foreground">
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22" />
                  </svg>
                  Trang chủ
                </a>
              </nav>
            </div>
          </div>

          <!-- User Menu -->
          <div th:if="@{${session.loggedInUser != null}}" class="rounded-lg border bg-card text-card-foreground shadow-sm">
            <div class="p-3">
              <h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2">
                Người dùng
              </h3>
              <nav class="space-y-1">
                <a href="/profile" class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground">
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                  </svg>
                  Hồ sơ
                </a>
                <a th:href="@{'/forum-my-posts/' + ${session.loggedInUser.accountId}}" class="flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground">
                  <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14,2 14,8 20,8" />
                    <line x1="16" y1="13" x2="8" y2="13" />
                    <line x1="16" y1="17" x2="8" y2="17" />
                    <polyline points="10,9 9,9 8,9" />
                  </svg>
                  Xem bài viết của tôi
                </a>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 max-w-4xl">
      <!-- Back Button -->
      <div class="mb-4">
        <a href="/forum" class="inline-flex items-center text-sm text-muted-foreground hover:text-foreground transition-colors">
          <svg class="h-4 w-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m12 19-7-7 7-7" />
            <path d="M19 12H5" />
          </svg>
          Quay lại trang chủ
        </a>
      </div>


      <!-- Post Detail -->
      <div class="rounded-lg border bg-card text-card-foreground shadow-sm mb-6">
        <div class="p-4">

          <!-- Post Meta -->
          <div class="flex items-center space-x-2 text-sm text-muted-foreground mb-3">
            <span>Đăng bởi [[${post.account.name}]]</span>
            <span class="opacity-40"
                  th:text="' ' + ${post.account.role.getValue()}"></span>
            <span>•</span>
            <span>[[${#temporals.format(post.createdAt, 'HH:mm dd/MM/yyyy')}]]</span>
          </div>

            <!-- Post Title -->
            <h1 class="text-xl font-bold leading-tight mb-4">
              [[${post.title}]]
            </h1>

            <!-- Media -->
          <!-- Hiển thị video -->
          <th:block th:each="media : ${post.medias}">
            <div th:if="${media.mediaCategory.name() == 'POST_VIDEO'}"
                 class="mb-3 rounded-md overflow-hidden relative">
              <video controls class="w-full h-auto object-cover">
                <source th:src="${media.url}" type="video/mp4" />
                Trình duyệt của bạn không hỗ trợ video.
              </video>
            </div>
          </th:block>


          <!-- Hiển thị ảnh -->
          <th:block th:each="media : ${post.medias}">
            <div th:if="${media.mediaCategory.name() == 'POST_IMAGE'}"
                 class="mb-3 rounded-md overflow-hidden max-h-96 relative">
              <img th:src="${media.url}"
                   alt="" class="w-full h-auto object-cover" />
            </div>
          </th:block>

            <!-- Post Content -->
            <div class="prose prose-sm max-w-none mb-6">
              <p class="text-foreground mb-4">
                [[${post.description}]]
              </p>
            </div>

          <!-- Post Actions -->
          <div class="flex items-center space-x-4 pt-4 border-t">

            <!-- Comment Section -->
            <div class="flex items-center space-x-2">
              <svg class="h-4 w-4 text-muted-foreground" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
              </svg>
              <span class="text-sm font-medium" th:text="${#lists.size(post.comments)} + ' Bình luận'"></span>
            </div>

            <!-- Voting Section -->
            <div class="flex flex-row items-center p-2 space-x-2 min-w-[40px]">
              <!-- upvote -->
              <a th:href="@{'/post-detail/' + ${post.getPostId()} + '/rating?rating=UPVOTE'}"
                 class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-6 w-6 hover:bg-primary/10 hover:text-primary">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m5 12 7-7 7 7" />
                  <path d="M12 19V5" />
                </svg>
              </a>
              <span class="text-xs font-medium text-muted-foreground" th:text="${postDTO.getRating()}"></span>
              <!-- downvote -->
              <a th:href="@{'/post-detail/' + ${post.getPostId()} + '/rating?rating=DOWNVOTE'}"
                 class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-6 w-6 hover:bg-destructive/10 hover:text-destructive">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 5v14" />
                  <path d="m19 12-7 7-7-7" />
                </svg>
              </a>
            </div>

            <!-- Chỉ hiện nếu là chủ bài viết -->
            <a th:if="${session.loggedInUser != null && session.loggedInUser.accountId == post.account.accountId}"
               th:href="@{'/update-post/' + ${post.postId}}"
               class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-3 py-2 text-xs">
              <svg class="h-3 w-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 20h9" />
                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z" />
              </svg>
              <span>Sửa</span>
            </a>

            <a th:if="${session.loggedInUser != null && session.loggedInUser.accountId == post.account.accountId}"
               th:href="@{'/delete-post/' + ${post.postId}}"
               onclick="return confirm('Bạn chắc chắn muốn xóa bài viết này?')"
               class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-destructive hover:text-destructive-foreground h-8 px-3 py-2 text-xs">
              <svg class="h-3 w-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6l-2 14H7L5 6"></path>
                <path d="M10 11v6"></path>
                <path d="M14 11v6"></path>
                <path d="M5 6l1-3h12l1 3"></path>
              </svg>
              <span>Xóa</span>
            </a>

          </div>
        </div>
      </div>

      <!-- Comment Form -->
      <div class="rounded-lg border bg-card text-card-foreground shadow-sm mb-6">
        <div class="p-4">
          <div class="flex items-center space-x-2 mb-3">
            <span th:if="${account != null}" class="text-sm text-muted-foreground">Bình luận với tư cách</span>
            <span th:if="${account != null}" th:text="${account.name}" class="text-sm font-medium text-foreground"></span>
            <span th:unless="${account != null and account.name != null}">bạn cần đăng nhập để bình luận</span>
          </span>
          </div>
          <form th:action="@{'/post-detail/' + ${post.postId} + '/comment'}" method="post">
          <textarea name="content" placeholder="Chia sẻ suy nghĩ của bạn..."
                class="flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none"></textarea>
            <div class="flex justify-end space-x-2 mt-3">
              <button type="reset"
                      class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3">
                Hủy
              </button>
              <button type="submit"
                      class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-3">
                Bình luận
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Comments Section -->
      <div class="space-y-4">
        <!-- Loop Comment -->
        <div th:each="comment : ${comments}" class="rounded-lg bg-card text-card-foreground">
          <div class="p-4">
            <div class="flex items-start space-x-3">

              <!-- Comment Content -->
              <div class="flex-1">
                <div class="flex items-center space-x-2 text-sm mb-2">
                  <span class="font-medium text-foreground"
                        th:text="${comment.account.name}"></span>
                  <span class="opacity-40"
                        th:text="' ' + ${comment.account.role.getValue()}"></span>
                  <span>•</span>
                  <span class="text-muted-foreground" th:text="${#temporals.format(comment.createdAt, 'HH:mm dd/MM/yyyy')}">1 giờ trước</span>

                  <!-- nút sửa comment-->
                  <button th:if="${session.loggedInUser != null && session.loggedInUser.accountId == comment.account.accountId}"
                          type="button"
                          class="edit-btn inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-3 py-2 text-xs">
                    <svg class="h-3 w-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 20h9" />
                      <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z" />
                    </svg>
                    <span>Sửa</span>
                  </button>

                  <!-- Nút Xóa comment -->
                  <a th:if="${session.loggedInUser != null && session.loggedInUser.accountId == comment.account.accountId}"
                     th:href="@{'/post-detail/' + ${post.postId} + '/comment/' + ${comment.commentPostId} + '/delete'}"
                     onclick="return confirm('Bạn chắc chắn muốn xóa phản hồi này?')"
                     class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-destructive hover:text-destructive-foreground h-8 px-3 py-2 text-xs">
                    <svg class="h-3 w-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="3 6 5 6 21 6"></polyline>
                      <path d="M19 6l-2 14H7L5 6"></path>
                      <path d="M10 11v6"></path>
                      <path d="M14 11v6"></path>
                      <path d="M5 6l1-3h12l1 3"></path>
                    </svg>
                    <span>Xóa</span>
                  </a>

                </div>
                <p class="text-sm mb-3" th:text="${comment.comment}">
                  Nội dung bình luận...
                </p>

                <!-- Form Sửa comment -->
                <div class="edit-form hidden">
                  <form th:action="@{'/post-detail/' + ${post.postId} + '/comment/' + ${comment.commentPostId} + '/edit'}" method="post">
                    <textarea name="content"
                          class="w-full border rounded p-2 text-sm mb-2"></textarea>
                    <div class="flex space-x-2">
                      <button type="submit"
                              class="bg-primary text-white px-3 py-1 rounded">Cập nhật</button>
                      <button type="button"
                              class="cancel-edit-btn bg-muted text-foreground px-3 py-1 rounded">Hủy</button>
                    </div>
                  </form>
                </div>

                <div class="flex items-center space-x-2">
                  <button type="button" class="reply-btn inline-flex items-center space-x-1 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors">
                    <svg class="h-3 w-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
                    </svg>
                    <span>Trả lời</span>
                  </button>
                </div>
                <!-- Form Reply (hidden by default) -->
                <div class="ml-11 mt-3 hidden reply-form">
                  <form th:action="@{'/post-detail/' + ${post.postId} + '/reply/' + ${comment.commentPostId} + '/reply'}" method="post">
                    <textarea name="content" placeholder="Nhập phản hồi..." class="w-full border rounded p-2 text-sm mb-2"></textarea>
                    <button type="submit" class="bg-primary text-white px-3 py-1 rounded">Gửi</button>
                  </form>
                </div>
              </div>
            </div>

            <!-- Loop Reply -->
            <div th:each="reply : ${comment.replies}"
                 class="ml-11 mt-4 pl-4 border-l-2 border-border">
              <div class="flex items-start space-x-3">

                <div class="flex-1">
                  <div class="flex items-center space-x-2 text-sm text-muted-foreground mb-2">
                    <span class="font-medium text-foreground"
                          th:text="'' + ${reply.account.name}">u/replier</span>
                    <span class="opacity-40"
                          th:text="' ' + ${comment.account.role.getValue()}"></span>
                    <span>•</span>
                    <span th:text="${#temporals.format(reply.createdAt, 'HH:mm dd/MM/yyyy')}">45 phút trước</span>

                    <!-- Nút Sửa reply -->
                    <button th:if="${session.loggedInUser != null && session.loggedInUser.accountId == reply.account.accountId}"
                            type="button"
                            class="edit-reply-btn inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-8 px-3 py-2 text-xs">
                      <svg class="h-3 w-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20h9" />
                        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z" />
                      </svg>
                      <span>Sửa</span>
                    </button>

                    <!-- Nút Xóa reply -->
                    <a th:if="${session.loggedInUser != null && session.loggedInUser.accountId == reply.account.accountId}"
                       th:href="@{'/post-detail/' + ${post.postId} + '/reply/' + ${reply.replyCommentId} + '/delete'}"
                       onclick="return confirm('Bạn chắc chắn muốn xóa phản hồi này?')"
                       class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-destructive hover:text-destructive-foreground h-8 px-3 py-2 text-xs">
                      <svg class="h-3 w-3 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6l-2 14H7L5 6"></path>
                        <path d="M10 11v6"></path>
                        <path d="M14 11v6"></path>
                        <path d="M5 6l1-3h12l1 3"></path>
                      </svg>
                      <span>Xóa</span>
                    </a>

                  </div>

                  <!-- Nội dung Reply -->
                  <p class="text-sm mb-3" th:text="${reply.comment}">
                    Nội dung trả lời...
                  </p>

                  <!-- Form Sửa Reply -->
                  <div class="edit-reply-form hidden">
                    <form th:action="@{'/post-detail/' + ${post.postId} + '/reply/' + ${reply.replyCommentId} + '/edit'}" method="post">
                    <textarea name="content"
                    class="w-full border rounded p-2 text-sm mb-2"></textarea>
                      <div class="flex space-x-2">
                        <button type="submit"
                                class="bg-primary text-white px-3 py-1 rounded">Cập nhật</button>
                        <button type="button"
                                class="cancel-edit-reply-btn bg-muted text-foreground px-3 py-1 rounded">Hủy</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Posts -->
    <div class="hidden lg:block">
      <div class="w-80 sticky top-20">
        <div class="rounded-lg border bg-card text-card-foreground shadow-sm">
          <div class="flex flex-col space-y-1.5 p-6 pb-3">
            <h3 class="text-sm font-semibold leading-none tracking-tight">
              Bài viết gần đây
            </h3>
          </div>
          <div class="p-6 pt-0 space-y-3">
            <a th:each="latestPost : ${latestPosts}"
               th:href="@{'/post-detail/' + ${latestPost.postId}}"
               class="block hover:bg-accent/50 rounded-md p-2 -m-2 transition-colors">

              <h4 class="text-sm font-medium leading-tight mb-2 line-clamp-2"
                  th:text="${latestPost.title}">Tiêu đề</h4>

              <div class="flex items-center justify-between text-xs text-muted-foreground">
                <span th:text="${#temporals.format(latestPost.createdAt, 'HH:mm dd/MM/yyyy')}">Ngày đăng</span>

                <div class="flex items-center gap-1">
                  <span th:text="'Đăng bởi ' + ${latestPost.accountName}">Đăng bởi ...</span>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
  // Simple JavaScript functionality
  document.addEventListener("DOMContentLoaded", function () {
    console.log("PetCare+ Post Detail loaded successfully");
  });

  document.querySelectorAll('.reply-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      const replyForm = btn.closest('.flex-1').querySelector('.reply-form');
      if (replyForm) {
        replyForm.classList.toggle('hidden');
      }
    });
  });

  // Script nút Sửa
  document.querySelectorAll('.edit-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      const commentBox = btn.closest('.flex-1');
      const editForm = commentBox.querySelector('.edit-form');
      const commentContent = commentBox.querySelector('p').innerText;

      // Điền nội dung gốc vào textarea
      editForm.querySelector('textarea').value = commentContent;

      // Hiển thị form
      editForm.classList.remove('hidden');
    });
  });

  // Script nút Hủy sửa
  document.querySelectorAll('.cancel-edit-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.closest('.edit-form').classList.add('hidden');
    });
  });

  // Nút Sửa Reply
  document.querySelectorAll('.edit-reply-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      const replyBox = btn.closest('.flex-1');
      const editForm = replyBox.querySelector('.edit-reply-form');
      const replyContent = replyBox.querySelector('p').innerText;

      // Điền nội dung gốc vào textarea
      editForm.querySelector('textarea').value = replyContent;

      // Hiển thị form
      editForm.classList.remove('hidden');
    });
  });

  // Nút Hủy Sửa Reply
  document.querySelectorAll('.cancel-edit-reply-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.closest('.edit-reply-form').classList.add('hidden');
    });
  });

  // Hien thi thong bao loi
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('error') === 'empty') {
    alert('Bình luận không được để trống');
  }
</script>
</body>
</html>
